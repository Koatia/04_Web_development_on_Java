### Java Core (семинары в записи)

### Урок 1. Компиляция и интерпретация кода

> Задание: Создать docker-контейнер для формирования полной документации по Java-проекту

---

### Шаг 1: Установка Docker на Fedora

Для начала нужно установить Docker. В Fedora это делается с помощью стандартного менеджера пакетов `dnf`.

1. **Обнови систему**:

   Открой терминал и выполни команду для обновления всех пакетов:

   ```bash
   sudo dnf update
   ```

2. **Установи Docker**:

   Выполни команду для установки Docker:

   ```bash
   sudo dnf install docker
   ```

3. **Запуск и настройка Docker**:

   После установки, нужно запустить сервис Docker:

   ```bash
   sudo systemctl start docker
   ```

   Чтобы Docker запускался автоматически при загрузке системы:

   ```bash
   sudo systemctl enable docker
   ```

4. **Проверка установки Docker**:

   Выполни следующую команду, чтобы убедиться, что Docker работает:

   ```bash
   sudo docker --version
   ```

   Если Docker установлен успешно, ты увидишь версию Docker. Пример вывода:

   ```
   Docker version 20.10.x, build xxxx
   ```

5. **Разрешение запуска Docker без sudo** (опционально):

   По умолчанию для работы с Docker нужно использовать `sudo`. Чтобы запускать Docker без `sudo`, добавь своего
   пользователя в группу `docker`:

   ```bash
   sudo usermod -aG docker $(whoami)
   ```

   Затем перезагрузи систему или выйди и снова войди в свою учётную запись.

---

### Шаг 2: Создание Docker-контейнера для генерации Javadoc

1. **Создаем структуру проекта**:

   В корневой директории проекта должен быть `Dockerfile` и папка с исходным кодом (`src`). Вот пример:

   ```
   /path/to/your/project
   ├── Dockerfile
   ├── src
   │   └── main
   │       └── ru
   │           └── example
   │               └── Main.java
   ```

2. **Создание Dockerfile**:

   В корневой директории проекта создаем файл `Dockerfile` с таким содержимым:

   ```Dockerfile
   # Используем официальный образ с Java
   FROM openjdk:17-jdk-alpine

   # Устанавливаем рабочую директорию
   WORKDIR /app

   # Копируем проект в контейнер
   COPY . /app

   # Команда для генерации Javadoc
   CMD ["javadoc", "-d", "/app/docs", "-sourcepath", "src", "-subpackages", "main.ru.example"]
   ```

   **Объяснение**:
    - Этот Dockerfile устанавливает Java внутри контейнера.
    - `COPY . /app` копирует весь проект в контейнер в директорию `/app`.
    - Команда `javadoc` будет генерировать документацию по исходным кодам в папке `src`.

   **Заменить**: в строке `-subpackages main.ru.example` укажи название своего пакета, чтобы Javadoc сгенерировал
   документацию именно для него.

---

### Шаг 3: Сборка Docker-образа

1. Перейди в корневую директорию проекта (где находится `Dockerfile`).
2. Выполни команду для сборки образа:

   ```bash
   docker build -t javadoc-generator .
   ```

   Эта команда создаст Docker-образ с именем `javadoc-generator`, используя текущую директорию (`.`) как контекст для
   сборки.

---

### Шаг 4: Запуск контейнера для генерации Javadoc

После успешной сборки контейнера, выполни следующую команду для запуска контейнера и генерации Javadoc:

```bash
docker run --rm -v $(pwd)/docs:/app/docs:z javadoc-generator
```

- Флаг `--rm` указывает на удаление контейнера после завершения работы.
- Флаг `-v $(pwd)/docs:/app/docs` монтирует локальную директорию `docs` (в корне проекта) в контейнере, чтобы сохранить
  сгенерированную документацию. Таким образом, ты можешь открыть документацию локально после генерации.
- Флаг `:z` пересматривает контекст безопасности для монтируемой папки, позволяя контейнеру безопасно получить доступ к
  ней даже с активированным SELinux. Это позволяет контейнеру читать и записывать в папку без ограничений со стороны
  SELinux.

---

### Шаг 5: Просмотр документации

После того, как команда выполнится, в локальной директории проекта появится папка `docs`, в которой будет
сгенерированная HTML-документация. Ты можешь открыть файл `index.html` в браузере для просмотра документации.

---